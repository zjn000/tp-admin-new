<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins" style="background: white;padding: 12px">
                <!-- 表单标题概要 -->
                <div class="ibox-title">
                    <h5>用户授权</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <!-- 表单内容 -->
                <form data-method="post" data-action="{:url('admin/authrule/saveAuthAccess')}" data-submit="ajax" data-validate="true" class="form-horizontal">
                <div class="ibox-content">
                    <table class="table table-striped table-bordered table-hover table-condensed">
                    		{notempty name="data"}
                            {volist name="data" id="vo"}
                    		<tr class="b-group">
                    			<th width="10%" style="text-align: center;"><input type="checkbox" name="authrule[]" value="{$vo['id']}" {if condition="in_array($vo['id'],$rule_ids)"}checked="checked"{/if}   onclick="checkAll(this)">{$vo.title}</th>
                    			<td>
                    				{volist name="vo.c" id="c"}
										<table class="table table-striped table-bordered table-hover table-condensed">
											<tr class="b-group">
												<th width="10%">
													<label>
														{$c['title']} <input type="checkbox" name="authrule[]" value="{$c['id']}" {if condition="in_array($c['id'],$rule_ids)"}checked="checked"{/if}  onclick="checkAll(this)">
													</label>
												</th>
												<td>
													{notempty name="c['f']"}
														{volist name="c['f']" id="r"}
															<label>
																&emsp;{$r['title']} <input type="checkbox" name="authrule[]" value="{$r['id']}" {if condition="in_array($r['id'],$rule_ids)"}	checked="checked"{/if} >
															</label>
														{/volist}							
													{/notempty}
												</td>
											</tr>
										</table>
									{/volist}
                    			</td>
                    		</tr>
                    		{/volist}
                            {/notempty}
                            <tr>
                            	<td colspan="2" style="text-align: center;"><button type="button" class="btn btn-default" onclick="javascript:history.go(-1)">{:lang('Cancel')}</button>
                            	<button type="submit" class="btn btn-primary">{:lang('Save')}</button></td>
                            </tr>
                    </table>
                    
                </div>
                </form>
            </div>
        </div>
    </div>
</div>



<script>
function checkAll(obj){
    $(obj).parents('.b-group').eq(0).find("input[type='checkbox']").prop('checked', $(obj).prop('checked'));
}  
</script>